/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   texture.c                                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: Cutku <cutku@student.42heilbronn.de>       +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/08/15 19:27:11 by sutku             #+#    #+#             */
/*   Updated: 2023/08/18 00:01:01 by Cutku            ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "cub3d.h"

int map2[18][24] = {
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1},
				{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1},
				{1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
				{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

t_coord    dda(t_game *game)
{
    int stepX;
    int stepY;
    int map_x;
    int map_y;
    int hit = 0;
    t_coord distance;

    map_x = (int)(game->player->x);
	map_y = (int)(game->player->y);
    if (game->ray.x < 0)
    {
        stepX = -1;
        distance.x = (game->player->x - map_x) * game->ray.delta_x;
    }
    else
    {
        stepX = 1;
        distance.x = (map_x + 1.0 - game->player->x) * game->ray.delta_x;
    }
    if (game->ray.y < 0)
    {
        stepY = -1;
        distance.y = (game->player->y - map_y) * game->ray.delta_y;
    }
    else
    {
        stepY = 1;
        distance.y = (map_y + 1.0 - game->player->y) * game->ray.delta_y;
    }
    while(hit == 0)
    {
        if(distance.x < distance.y)
        {
            distance.x += game->ray.delta_x;
            map_x += stepX;
            if (game->ray.x > 0)
                game->wall.side = 0;
            else
                game->wall.side = 2;
        }
        else
        {
            distance.y += game->ray.delta_y;
            map_y += stepY;
            if (game->ray.y > 0)
                game->wall.side = 1;
            else
                game->wall.side = 3;
        }
        if(map2[map_x][map_y] == 1)
            hit = 1;
    }
    return (distance);
}
